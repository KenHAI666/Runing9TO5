<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>後台新增文章</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; line-height: 1.6; max-width: 1200px; margin: 0 auto; padding: 20px; background-color: #f4f7f6; }
        h1, h2 { color: #333; }
        form, #preview { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
        label { font-weight: bold; margin-bottom: 5px; display: block; }
        input[type="text"], textarea { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
        input[type="submit"] { background-color: #007bff; color: white; padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        input[type="submit"]:hover { background-color: #0056b3; }
        #preview .card-section-1 { border: 1px dashed #ccc; padding: 20px; border-radius: 8px; }
        #preview h1 { color: #555; }
        p { margin-top: 0; }
        ul, ol { margin-top: 0; padding-left: 20px; }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.17/marked.min.js"></script>
</head>
<body>
    <h1>新增文章</h1>
    <form id="articleForm" method="post">
        <label for="title">標題：</label>
        <input type="text" name="title" id="title" required><br>

        <label for="categories">分類：</label>
        <input type="text" name="categories" id="categories" required placeholder="用逗號分隔，例如: 技術, 行銷"><br>

        <label for="content">內容 (支援 Markdown 語法)：</label>
        <textarea name="content" id="content" rows="15" required></textarea><br>

        <input type="submit" value="儲存並發布文章">
    </form>

    <h2>即時預覽</h2>
    <div id="preview"></div>

    <script>
        const titleInput = document.getElementById("title");
        const categoriesInput = document.getElementById("categories");
        const contentInput = document.getElementById("content");
        const previewDiv = document.getElementById("preview");

        function updatePreview() {
            const title = titleInput.value;
            const categories = categoriesInput.value.split(',').map(c => c.trim());
            const content = contentInput.value;
            
            // 使用 marked.js 將 Markdown 轉換為 HTML
            const renderedContent = marked.parse(content);

            if(title || content) {
                previewDiv.innerHTML = `
                    <div class="card-section-1">
                        <h1>${title}</h1>
                        <p><strong>分類:</strong> ${categories.join(', ')}</p>
                        <hr>
                        ${renderedContent}
                    </div>
                `;
            } else {
                previewDiv.innerHTML = '';
            }
        }

        titleInput.addEventListener("input", updatePreview);
        categoriesInput.addEventListener("input", updatePreview);
        contentInput.addEventListener("input", updatePreview);
    </script>
</body>
</html>
